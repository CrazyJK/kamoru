<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=EUC-KR">
<title> 로그인 </title>
<script type="text/javascript" src="ajax.js"></script>

<script type="text/javascript" >

function trim(s) {
	s = s.replace(/(^\s*)|(\s*$)/g,"");
    return s;
}

function callbackFunction(httpRequest) {
   switch (httpRequest.readyState) {
   case 1:
   case 2:
   case 3:
   	 break;
   case 4:
        //서버로부터 응답 도착 
        if (httpRequest.status == 200) {
        	var result = trim(httpRequest.responseText);
        	var arr = result.split(",");
			var code = parseInt(arr[0]);
			 
			switch (code) {
			case 0:
				//화면 변경
				var namePanel = document.getElementById("namePanel");
				var loginPanel1 = document.getElementById("loginPanel1");
				var loginPanel2 = document.getElementById("loginPanel2");
				
				namePanel.innerHTML = arr[1];
				
				loginPanel1.style.display = "none";
				loginPanel2.style.display = "block";
				
				break;
			case -1:
				alert("비밀번호가 잘못되었습니다");
				break;
			case -2:
				alert("아이디가 존재하지 않습니다.");
				break;
			default:
				alert("알 수 없는 오류입니다.");
				break;
			}
        }
        break;
   }
}

function login() {
	var param;
	var UID = document.getElementById("UID");
	var PWD = document.getElementById("PWD");
	
	param = {UID : UID.value, PWD : PWD.value } ;
	 
	new ajax.xhr.Request("login.jsp", param, callbackFunction);
}

function logout() {
	var loginPanel1 = document.getElementById("loginPanel1");
	var loginPanel2 = document.getElementById("loginPanel2");
	
	loginPanel1.style.display = "block";
	loginPanel2.style.display = "none";
	
	var UID = document.getElementById("UID");
//	var PWD = document.getElementById("PWD");

//	UID.value = "";
//	PWD.value = "";

	document.form1.reset();
	UID.focus();
}

</script>
</head>
<body>

<h3>로그인</h3>
<hr>

<br/>

<div id="loginPanel1">
	<form name="form1" method="get" >
		아이디 : <input type="text" name="UID" id="UID" maxlength="8"> <br/>
		비밀번호 : <input type="password" name="PWD" id="PWD" maxlength="8"> <br/>
		<input type="button" value="로그인" onclick="login()">
	</form>
</div>
<div id="loginPanel2" style="display: none">
	<span id="namePanel"></span> <a href="#" onclick="logout()">로그아웃</a> 
</div>

</body>
</html>