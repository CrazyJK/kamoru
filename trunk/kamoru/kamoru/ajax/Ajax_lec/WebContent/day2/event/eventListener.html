<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=EUC-KR">
<title>이벤트 핸들러 모듈</title>
<script type="text/javascript">

/*Event 클래스 생성*/ 
var Event = {};

/*이벤트 핸들러 추가
element : 이벤트 발생 객체 
eventName : 이벤트명 (IE에서도 on을 제거한다 예:"click")
handler : 이벤트 처리 핸들러 
capture : 이벤트 캡처  
*/ 
Event.addListener = function (element, eventName, handler, capture) {
  //capture 인자를 생략하면 기본 값으로 false를 설정한다.
  capture = capture || false;
  
  if (element.attachEvent) {
    element.attachEvent("on" + eventName, handler);
  } else if (element.addEventListener) {
    element.addEventListener(eventName, handler, capture);
  }
} 

/*이벤트 핸들러 제거 
element : 이벤트 발생 객체 
eventName : 이벤트명 (IE에서도 on을 제거한다 예:"click")
handler : 이벤트 처리 핸들러 
capture : 이벤트 캡처  
*/ 
Event.removeListener = function(element, eventName, handler, capture) {
  //capture 인자를 생략하면 기본 값으로 false를 설정한다.
  capture = capture || false;
  
  if (element.detachEvent) {
    element.detachEvent("on" + eventName, handler);
  } else if (element.removeEventListener) {
    element.removeEventListener(eventName, handler, capture);
  }
}  

window.onload = function() {
  var add1 = document.getElementById("add1");
  var add2 = document.getElementById("add2");
  var remove1 = document.getElementById("remove1");
  var remove2 = document.getElementById("remove2");

  Event.addListener(add1, "click", onclick_button1_add);
  Event.addListener(add2, "click", onclick_button2_add);
  Event.addListener(remove1, "click", onclick_button1_remove);
  Event.addListener(remove2, "click", onclick_button2_remove);
}

function onclick_button1(){
  var debug = document.getElementById("debug");
  debug.innerHTML += "<br/>onclick_button1() 이벤트 핸들러";
}

function onclick_button2(){
  var debug = document.getElementById("debug");
  debug.innerHTML += "<br/>onclick_button2() 이벤트 핸들러";
}

function onclick_button1_add(){
  var btn = document.getElementById("btn");

  Event.addListener(btn, "click", onclick_button1);
  alert("onclick_button1() 이벤트 핸들러 추가");
}

function onclick_button2_add(){
  var btn = document.getElementById("btn");

  Event.addListener(btn, "click", onclick_button2);
  alert("onclick_button2() 이벤트 핸들러 추가");
}

function onclick_button1_remove(){
  var btn = document.getElementById("btn");

  Event.removeListener(btn, "click", onclick_button1);
  alert("이벤트 핸들러 제거");
}

function onclick_button2_remove(){
  var btn = document.getElementById("btn");

  Event.removeListener(btn, "click", onclick_button2);
  alert("이벤트 핸들러 제거");
}

</script>
</head>
<body>
<h3>이벤트 핸들러 모듈화 작성법</h3>
<div>처음에는 버튼을 클릭해도 이벤트 핸들러 동작안함</div> 
버튼 : <input type="button" value="클릭하세요!!!" id="btn"><br/>
<input type="button" value="onclick_button1() 이벤트 등록" id="add1"> 
<input type="button" value="onclick_button2() 이벤트 등록" id="add2"> 
<input type="button" value="onclick_button1() 이벤트 제거" id="remove1"> 
<input type="button" value="onclick_button2() 이벤트 제거" id="remove2"> 
<div id="debug"></div> 

</body>
</html>